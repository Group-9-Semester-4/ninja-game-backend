<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Statistics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link th:href="@{/css/main.css}" rel="stylesheet">
</head>
<body>
<h2> Welcome to statistics.</h2>
<p> Here you can find information about the games being played.</p>
<p> As of now, we keep track of which cards are discarded (at the beginning of the game, players can choose to discard
    them). And which cards are redrawn,
    (during gameplay, players can choose to "skip" certain cards - redraw a different one).</p>
<div id="redrawn-cards" style="position: relative; height: 40vh; width: 80vh;"><canvas id="redrawn"></canvas></div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
    var JSONtest = /*[[${discards}]]*/ {};
    console.log(JSONtest);
</script>
<script>

    var ctx = document.getElementById('redrawn').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: Object.keys(JSONtest),
            datasets: [{
                label: 'Number of redraws',
                data: Object.values(JSONtest),
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive:  true,
            indexAxis: 'y',
            plugins: {
                title: {
                    display: true,
                    text: 'Card discards',
                    padding: {
                        top: 10,
                        bottom: 10
                    }
                }
            }


        }
    });

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>
</body>
</html>